@{
    ViewData["Title"] = "Product Management - Choose Category";
    var categoryCounts = ViewBag.CategoryCounts as Dictionary<string, int>;
    var allProducts = ViewBag.AllProducts as IEnumerable<Product>;
}

<div class="container-fluid">
    <div class="row">
        <!-- Header Section -->
        <div class="col-12 mb-4">
            <div class="text-center">
                <h1 class="display-4 fw-bold text-primary">
                    <i class="fas fa-cogs me-3"></i>Factory Design Pattern
                </h1>
                <p class="lead text-muted">Choose a category to manage products using the Factory Pattern</p>
            </div>
        </div>

        <!-- Category Cards -->
        <div class="col-12">
            <div class="row">
                <!-- Electronics Category -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card h-100 border-primary">
                        <div class="card-header bg-primary text-white text-center">
                            <i class="fas fa-microchip fa-3x mb-2"></i>
                            <h3 class="mb-0">Electronics</h3>
                        </div>
                        <div class="card-body text-center">
                            <h2 class="text-primary">@(categoryCounts?.GetValueOrDefault("Electronics", 0) ?? 0)</h2>
                            <p class="text-muted">products</p>
                            <p class="small">Electronic devices, gadgets, and tech products</p>
                        </div>
                        <div class="card-footer bg-light text-center">
                            <a asp-action="CategoryIndex" asp-route-category="Electronics" class="btn btn-primary btn-lg w-100">
                                <i class="fas fa-cogs me-2"></i>Manage Electronics
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Furniture Category -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card h-100 border-warning">
                        <div class="card-header bg-warning text-dark text-center">
                            <i class="fas fa-couch fa-3x mb-2"></i>
                            <h3 class="mb-0">Furniture</h3>
                        </div>
                        <div class="card-body text-center">
                            <h2 class="text-warning">@(categoryCounts?.GetValueOrDefault("Furniture", 0) ?? 0)</h2>
                            <p class="text-muted">products</p>
                            <p class="small">Chairs, tables, sofas, and home furniture</p>
                        </div>
                        <div class="card-footer bg-light text-center">
                            <a asp-action="CategoryIndex" asp-route-category="Furniture" class="btn btn-warning btn-lg w-100">
                                <i class="fas fa-cogs me-2"></i>Manage Furniture
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Automobile Category -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card h-100 border-danger">
                        <div class="card-header bg-danger text-white text-center">
                            <i class="fas fa-car fa-3x mb-2"></i>
                            <h3 class="mb-0">Automobile</h3>
                        </div>
                        <div class="card-body text-center">
                            <h2 class="text-danger">@(categoryCounts?.GetValueOrDefault("Automobile", 0) ?? 0)</h2>
                            <p class="text-muted">products</p>
                            <p class="small">Cars, trucks, motorcycles, and vehicles</p>
                        </div>
                        <div class="card-footer bg-light text-center">
                            <a asp-action="CategoryIndex" asp-route-category="Automobile" class="btn btn-danger btn-lg w-100">
                                <i class="fas fa-cogs me-2"></i>Manage Automobile
                            </a>
                        </div>
                    </div>
                </div>

                <!-- Others Category -->
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card h-100 border-secondary">
                        <div class="card-header bg-secondary text-white text-center">
                            <i class="fas fa-box fa-3x mb-2"></i>
                            <h3 class="mb-0">Others</h3>
                        </div>
                        <div class="card-body text-center">
                            <h2 class="text-secondary">@(categoryCounts?.GetValueOrDefault("Others", 0) ?? 0)</h2>
                            <p class="text-muted">products</p>
                            <p class="small">Miscellaneous items and other products</p>
                        </div>
                        <div class="card-footer bg-light text-center">
                            <a asp-action="CategoryIndex" asp-route-category="Others" class="btn btn-secondary btn-lg w-100">
                                <i class="fas fa-cogs me-2"></i>Manage Others
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- All Products Summary -->
        @if (allProducts != null && allProducts.Any())
        {
            <div class="col-12 mt-5">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h3 class="mb-0">
                            <i class="fas fa-list me-2"></i>All Products Summary
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h5>Total Products: <span class="badge bg-primary fs-6">@allProducts.Count()</span></h5>
                                <h5>Active Products: <span class="badge bg-success fs-6">@allProducts.Count(p => p.IsActive)</span></h5>
                                <h5>Inactive Products: <span class="badge bg-danger fs-6">@allProducts.Count(p => !p.IsActive)</span></h5>
                            </div>
                            <div class="col-md-6">
                                <h5>Total Stock: <span class="badge bg-info fs-6">@allProducts.Sum(p => p.StockQuantity)</span></h5>
                                <h5>Categories: <span class="badge bg-warning fs-6">@allProducts.Select(p => p.Category).Distinct().Count()</span></h5>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        }
    </div>
</div>
